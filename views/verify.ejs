<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Â∞èËè≤È™åËØÅ - <%= groupName %></title>
    <link rel="stylesheet" href="/css/modern-verify.css">
    <script src="https://challenges.cloudflare.com/turnstile/v0/api.js" async defer></script>
</head>
<body>
    <!-- Âä®ÊÄÅËÉåÊôØÂ±Ç -->
    <div class="dynamic-bg">
        <div class="gradient-orb orb-1"></div>
        <div class="gradient-orb orb-2"></div>
        <div class="gradient-orb orb-3"></div>
    </div>

    <!-- Á≤íÂ≠êÁîªÂ∏É -->
    <canvas id="particles"></canvas>

    <!-- ‰∏ªÂÆπÂô® -->
    <div class="container">
        <!-- Liquid Glass Âç°Áâá -->
        <div class="glass-card main-card">
            <!-- Â§¥ÈÉ®Âå∫Âüü -->
            <div class="header-section">
                <div class="logo-container">
                    <div class="logo-wrapper">
                        üçì
                    </div>
                </div>
                <h1 class="title">Â∞èËè≤È™åËØÅ</h1>
                <p class="subtitle">Ê¨¢ËøéÂä†ÂÖ• <%= groupName %></p>
            </div>

            <!-- ÂÜÖÂÆπÂå∫Âüü -->
            <div class="content-section">
                <!-- Áî®Êà∑‰ø°ÊÅØÂç°Áâá -->
                <div class="bento-item user-info">
                    <div class="avatar">
                        <%= userFirstName.charAt(0).toUpperCase() %>
                    </div>
                    <div class="user-details">
                        <h3><%= userFirstName %> <%= userLastName || '' %></h3>
                        <% if (username) { %>
                            <p class="username">@<%= username %></p>
                        <% } %>
                    </div>
                </div>

                <!-- ÂÄíËÆ°Êó∂Âç°Áâá -->
                <div class="bento-item countdown-section">
                    <div class="countdown-wrapper">
                        <svg class="countdown-ring" viewBox="0 0 120 120">
                            <defs>
                                <linearGradient id="timer-gradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                    <stop offset="0%" style="stop-color:#FF10F0;stop-opacity:1" />
                                    <stop offset="50%" style="stop-color:#8B5CF6;stop-opacity:1" />
                                    <stop offset="100%" style="stop-color:#06B6D4;stop-opacity:1" />
                                </linearGradient>
                            </defs>
                            <circle class="timer-bg" cx="60" cy="60" r="54"/>
                            <circle class="timer-progress" cx="60" cy="60" r="54"/>
                        </svg>
                        <div class="countdown-text">
                            <div class="countdown-number" id="countdown"><%= ttlMinutes %></div>
                            <div class="countdown-label">ÂàÜÈíü</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Turnstile È™åËØÅÂå∫Âüü - Â±Ö‰∏≠Á™ÅÂá∫ -->
            <div class="form-section">
                <form id="verifyForm" method="POST" action="/api/verify">
                    <input type="hidden" name="token" value="<%= token %>">
                    
                    <!-- Turnstile ‰∫∫Êú∫È™åËØÅ -->
                    <div class="turnstile-container">
                        <div class="cf-turnstile" 
                             data-sitekey="<%= siteKey %>"
                             data-callback="onTurnstileSuccess"
                             data-error-callback="onTurnstileError"
                             data-theme="dark">
                        </div>
                    </div>

                    <!-- Êèê‰∫§ÊåâÈíÆ -->
                    <button type="submit" id="submitBtn" class="magnetic-button" disabled>
                        <span>ÂÆåÊàêÈ™åËØÅ</span>
                    </button>
                </form>

                <!-- Ê∂àÊÅØÊèêÁ§∫ -->
                <div id="errorMessage" class="message error-message" style="display: none;"></div>
                <div id="successMessage" class="message success-message" style="display: none;"></div>
            </div>
        </div>
    </div>

    <!-- Áé∞‰ª£Âåñ‰∫§‰∫íËÑöÊú¨ -->
    <script src="/js/modern-verify.js"></script>
</body>
</html>